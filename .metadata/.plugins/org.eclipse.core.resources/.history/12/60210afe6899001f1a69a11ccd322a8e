/*
 * tests.c
 *
 *  Created on: Nov 1, 2024
 *      Author: David Prospérin
 */

#include <main.h>
#include <assert.h>
#include <stdio.h>
#include <tests.h>

/*
   Création d'un trame d'une mesure de SCAN normale d'exemple

	S de 0
	quality de 10
	angle de 10 °
	distance de 10 mm
 */

frame_t frame_under_test = {
		0xA5,
		0x5A,
		0x2A,
		0x01,
		0x05,
		0x28,
		0x00
};

void do_all_tests()
{
	do_lidar_distance_test();
	do_lidar_angle_test();
	do_lidar_check_bit_test();
	do_lidar_check_inversed_start_flag_bit_test();
	do_lidar_get_quality_test();
}

void do_lidar_distance_test()
{
	assert(lidar_distance(frame_under_test) == 10 && "Distance equal to 10 mm");
}

void do_lidar_angle_test()
{

	assert(lidar_angle(frame_under_test) == 10.0f && "Angle equal to 10 deg");
}

void do_lidar_check_bit_test()
{
	assert(lidar_check_bit(frame_under_test) && "Should return 1");
}

void do_lidar_check_inversed_start_flag_bit_test()
{
	assert(lidar_check_inversed_start_flag_bit(frame_under_test) && "Should return 1");
}

void do_lidar_get_quality_test()
{
	assert(lidar_get_quality(frame_under_test) == 10 && "Should return 1");
}

void do_is_new_scan_test()
{

}
